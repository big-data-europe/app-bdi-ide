# mu-docker-watcher

## Description
This microservice periodically scans a JSON file containing the information about the running containers to be logged
previously generated by the **mu-docker-event-query** microservice.

## Usage
```sh
docker run --rm -it \
           -v "$PWD":/app \
           -v "$PWD/containers_test":/app/containers \
           -v "$PWD"/pcap:/app/pcap \
	         -v "$PWD"/supervisord.conf:/etc/supervisord.conf \
           --network host \
           --name mu-docker-watcher \
           -e MODE=development \
           mu-docker-watcher
```


* The **containers/** mounted folder contains the **containers.json** file generated by the **mu-docker-event-query** microservice.
* The **pcap/** folder contains the .pcap files generated per each **tcpdump** process started to observe traffic coming from each new container.
* **supervisord.conf** is a file needed to run the *supervisord* daemon as the startup program of the container. This is done this way because the main script (*init.sh*) will launch several processes in the background, and hence supervisor is needed to properly track and terminate them when the container is stopped.
